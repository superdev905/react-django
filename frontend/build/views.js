"use strict";var RDA=RDA||{};RDA.Views=RDA.Views||{},RDA.Views.NavigationTop=React.createClass({displayName:"NavigationTop",handleLogout:function(e){e.preventDefault(),app.user.save({access_token:null}),app.navigate("/",{trigger:!0})},render:function(){for(var e=[{hash:"#users",text:"Users",className:""}],t=0;t<e.length;t++)$(location).attr("hash").indexOf(e[t].hash)>-1&&(e[t].className="active");return React.createElement("div",{className:"row",__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:20}},React.createElement("ul",{className:"nav nav-tabs",__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:21}},React.createElement("li",{role:"presentation",className:e[0].className,__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:22}},React.createElement("a",{href:e[0].hash,__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:22}},e[0].text)),React.createElement("li",{role:"presentation",__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:23}},React.createElement("a",{href:"#",onClick:this.handleLogout,__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:23}},"Logout"))),React.createElement("br",{__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:25}}))}}),RDA.Views.AlertView=React.createClass({displayName:"AlertView",render:function(){var e="alertView alert alert-dismissable";return e+=this.props.data.state?" alert-"+this.props.data.state:" hidden",React.createElement("div",{className:e,role:"alert",__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:40}},React.createElement("button",{type:"button",className:"close","data-dismiss":"alert",__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:41}},React.createElement("span",{"aria-hidden":"true",__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:42}},"Ã—"),React.createElement("span",{className:"sr-only",__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:43}},"Close")),this.props.data.message)}}),RDA.Views.ModalTrigger=React.createClass({displayName:"ModalTrigger",handleClick:function(e){e.preventDefault(),$(this.refs.payload.getDOMNode()).modal()},render:function(){return React.createElement("div",{onClick:this.handleClick,__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:58}},this.props.trigger,React.createElement(RDA.Views.Modal,{ref:"payload",content:this.props.content,htmlID:this.props.htmlID,__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:60}}))}}),RDA.Views.Modal=React.createClass({displayName:"Modal",componentDidMount:function(){$(this.getDOMNode()).modal({background:!0,keyboard:!0,show:!1})},componentWillUnmount:function(){$(this.getDOMNode()).off("hidden")},handleClick:function(e){e.stopPropagation()},render:function(){return React.createElement("div",{onClick:this.handleClick,className:"modal fade",role:"dialog","aria-hidden":"true",id:this.props.htmlID,__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:85}},React.createElement("div",{className:"modal-dialog",__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:86}},React.createElement("div",{className:"modal-content",__source:{fileName:"../../../../../src/templates/views-common.jsx",lineNumber:87}},this.props.content)))}});var RDA=RDA||{};RDA.Views=RDA.Views||{},RDA.Views.EmptyView=React.createClass({displayName:"EmptyView",render:function(){return React.createElement("div",{__source:{fileName:"../../../../../src/templates/views-empty.jsx",lineNumber:7}})}}),RDA.Views.renderEmptyView=function(){React.render(React.createElement(RDA.Views.EmptyView,{__source:{fileName:"../../../../../src/templates/views-empty.jsx",lineNumber:14}}),document.getElementById("app"))};var RDA=RDA||{};RDA.Views=RDA.Views||{},RDA.Views.HelloView=React.createClass({displayName:"HelloView",render:function(){return React.createElement("div",{__source:{fileName:"../../../../../src/templates/views-hello.jsx",lineNumber:7}},"Hello")}}),RDA.Views.renderHelloView=function(){React.render(React.createElement(RDA.Views.HelloView,{__source:{fileName:"../../../../../src/templates/views-hello.jsx",lineNumber:16}}),document.getElementById("app"))};var RDA=RDA||{};RDA.Views=RDA.Views||{},RDA.Views.LoginView=React.createClass({displayName:"LoginView",getInitialState:function(){return{alert:{state:null,message:null}}},onFormSubmit:function(e,t){this.setState({alert:{state:e,message:t}})},render:function(){return React.createElement("div",{className:"loginView",id:"form_signin",__source:{fileName:"../../../../../src/templates/views-login.jsx",lineNumber:13}},React.createElement(RDA.Views.LoginForm,{onFormSubmit:this.onFormSubmit,__source:{fileName:"../../../../../src/templates/views-login.jsx",lineNumber:14}}),React.createElement(RDA.Views.AlertView,{data:this.state.alert,__source:{fileName:"../../../../../src/templates/views-login.jsx",lineNumber:15}}))}}),RDA.Views.LoginForm=React.createClass({displayName:"LoginForm",getInitialState:function(){return{username:null,password:null,ajaxRunning:0}},inputChanged:function(e,t){var s={};s[e]=t.target.value,this.setState(s)},handleFormSubmit:function(e){e.preventDefault();var t=this;t.state.ajaxRunning||(t.setState({ajaxRunning:1}),$.ajax({type:"POST",url:app.Config.API_URI+"/o/token/",success:function(e){t.setState({ajaxRunning:0}),e=JSON.parse(e),"localStorage"in window&&null!==window.localStorage&&(localStorage["RDA_APP.user.at"]=e.access_token),app.user.save({access_token:e.access_token}),app.navigate("/users",{trigger:!0})},data:{grant_type:"password",client_id:app.Config.CLIENT_ID,client_secret:app.Config.CLIENT_SECRET,username:t.state.username,password:t.state.password},error:function(e){t.setState({ajaxRunning:0}),t.props.onFormSubmit("danger","Can't log in. Please check your password.")},dataType:"text"}))},render:function(){var e="",t="";return this.state.ajaxRunning&&(t="disabled",e='<span class="glyphicon glyphicon-refresh spinning"></span> '),React.createElement("form",{className:"loginForm form-signin row",onSubmit:this.handleFormSubmit,__source:{fileName:"../../../../../src/templates/views-login.jsx",lineNumber:77}},React.createElement("input",{type:"text",className:"inputUsername form-control",id:"inputUsername",placeholder:"Username",onChange:this.inputChanged.bind(this,"username"),required:!0,autofocus:!0,__source:{fileName:"../../../../../src/templates/views-login.jsx",lineNumber:78}}),React.createElement("input",{type:"password",className:"inputPassword form-control",id:"inputUsername",placeholder:"Password",onChange:this.inputChanged.bind(this,"password"),required:!0,autofocus:!0,__source:{fileName:"../../../../../src/templates/views-login.jsx",lineNumber:79}}),React.createElement("button",{type:"submit",className:"btn btn-lg btn-primary btn-block",id:"loginButton",disabled:t,__source:{fileName:"../../../../../src/templates/views-login.jsx",lineNumber:80}},React.createElement("span",{dangerouslySetInnerHTML:{__html:e},__source:{fileName:"../../../../../src/templates/views-login.jsx",lineNumber:80}}),"Login"))}}),RDA.Views.renderLoginView=function(){React.render(React.createElement(RDA.Views.LoginView,{__source:{fileName:"../../../../../src/templates/views-login.jsx",lineNumber:88}}),document.getElementById("app"))};var RDA=RDA||{};RDA.Views=RDA.Views||{},RDA.Views.UserItem=React.createClass({displayName:"UserItem",deleteUser:function(e,t){if(t.preventDefault(),e==app.user.attributes.id)return void alert("You can't delete yourself");if(confirm("Are you sure? This cannot be undone.")){var s=this;s.setState({ajaxRunning:1}),$.ajax({type:"DELETE",url:app.Config.API_URI+"/api/R/users/"+e+"/",success:function(e){s.setState({ajaxRunning:0,data:e}),renderUsersView(),app.navigate("/refresh",{trigger:!0}),app.navigate("/users",{trigger:!0})},beforeSend:function(e,t){e.setRequestHeader("Authorization","Bearer "+app.user.attributes.access_token)},error:function(e){console.log(e),s.setState({ajaxRunning:0});var t="Error while deleting user.";e&&e.responseText&&(t=e.responseText),s.setState({alert:{state:"danger",message:t}})},dataType:"json"})}},render:function(){var e=this.props.data.username;return this.props.data.first_name&&this.props.data.last_name?e=this.props.data.first_name+" "+this.props.data.last_name:this.props.data.first_name&&(e=this.props.data.first_name),React.createElement("tr",{__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:54}},React.createElement("td",{__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:55}},React.createElement("span",{__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:56}},e)),React.createElement("td",{__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:58}},React.createElement("div",{className:"pull-right",__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:59}},React.createElement("a",{href:"#",onClick:this.deleteUser.bind(this,this.props.data.id),className:"btn btn-sm btn-danger",__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:60}},"Delete"))))}}),RDA.Views.UserList=React.createClass({displayName:"UserList",render:function(){var e=this.props.data.map(function(e){return React.createElement(RDA.Views.UserItem,{data:e,__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:72}})});return React.createElement("table",{className:"table table-striped",__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:76}},React.createElement("thead",{__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:77}},React.createElement("tr",{__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:78}},React.createElement("td",{__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:78}},"Users"))),React.createElement("tbody",{__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:80}},e))}}),RDA.Views.UserDashboard=React.createClass({displayName:"UserDashboard",getInitialState:function(){return{data:[],alert:{state:null,message:null},ajaxRunning:0}},componentDidMount:function(){var e=this;e.setState({ajaxRunning:1}),$.ajax({type:"GET",url:app.Config.API_URI+"/api/R/users",success:function(t){e.setState({ajaxRunning:0,data:t})},data:{access_token:app.user.attributes.access_token},error:function(t){e.setState({ajaxRunning:0}),e.setState({alert:{state:"danger",message:"No access."}})},dataType:"json"})},render:function(){var e="";return this.state.ajaxRunning&&(e='<div class="well"><span class="glyphicon glyphicon-refresh spinning"></span></div>'),React.createElement("div",{__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:123}},React.createElement(RDA.Views.AlertView,{data:this.state.alert,__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:124}}),React.createElement(RDA.Views.NavigationTop,{__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:125}}),React.createElement(RDA.Views.UserList,{data:this.state.data,__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:126}}),React.createElement(RDA.Views.AddUserModal,{__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:127}}),React.createElement("span",{dangerouslySetInnerHTML:{__html:e},__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:128}}))}}),RDA.Views.AddUserModal=React.createClass({displayName:"AddUserModal",getInitialState:function(){return{data:{},alert:{state:null,message:null},ajaxRunning:0}},inputChanged:function(e,t){var s=this.state.data;s[e]=t.target.value,this.setState(s)},handleFormSubmit:function(e){e.preventDefault();var t=this;t.setState({ajaxRunning:1}),$.ajax({type:"POST",url:app.Config.API_URI+"/api/R/users/",success:function(e){t.setState({ajaxRunning:0,data:e}),$("#addUserModal").modal("hide"),app.navigate("/refresh",{trigger:!0}),app.navigate("/users",{trigger:!0})},beforeSend:function(e,t){e.setRequestHeader("Authorization","Bearer "+app.user.attributes.access_token)},data:{username:t.state.data.username,email:t.state.data.email},error:function(e){console.log(e),t.setState({ajaxRunning:0});var s="Hiba a mentÃ©s sorÃ¡n.";e&&e.responseText&&(s=e.responseText),t.setState({alert:{state:"danger",message:s}})},dataType:"json"})},render:function(){return React.createElement(RDA.Views.ModalTrigger,{htmlID:"addUserModal",trigger:React.createElement("a",{className:"btn btn-danger",__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:188}},"New user"),content:React.createElement("form",{className:"form-horizontal",onSubmit:this.handleFormSubmit,__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:190}},React.createElement("div",{className:"modal-header",__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:191}},React.createElement("h3",{__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:191}},"New user")),React.createElement("div",{className:"modal-body col-sm-12",__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:192}},React.createElement(RDA.Views.AlertView,{data:this.state.alert,__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:193}}),React.createElement("div",{className:"form-group",__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:194}},React.createElement("label",{"for":"username",className:"col-sm-2 control-label",__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:195}},"Username"),React.createElement("div",{className:"col-sm-10",__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:196}},React.createElement("input",{type:"text",className:"form-control",id:"name",placeholder:"Username",onChange:this.inputChanged.bind(this,"username"),__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:197}}))),React.createElement("div",{className:"form-group",__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:200}},React.createElement("label",{"for":"email",className:"col-sm-2 control-label",__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:201}},"E-mail"),React.createElement("div",{className:"col-sm-10",__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:202}},React.createElement("input",{type:"text",className:"form-control",id:"name",placeholder:"E-mail",onChange:this.inputChanged.bind(this,"email"),__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:203}})))),React.createElement("div",{className:"modal-footer",__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:207}},React.createElement("a",{className:"btn btn-default","data-dismiss":"modal",__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:208}},"Cancel"),React.createElement("button",{type:"submit",className:"btn btn-primary",__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:209}},"Add user"))),__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:186}})}}),RDA.Views.renderUsersView=function(){React.render(React.createElement(RDA.Views.UserDashboard,{__source:{fileName:"../../../../../src/templates/views-users.jsx",lineNumber:220}}),document.getElementById("app"))};
//# sourceMappingURL=views.js.map
