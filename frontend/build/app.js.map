{"version":3,"sources":["config.js","api.js","app.js"],"names":["RDA","this","Config","API_URI","API_KEY","CLIENT_ID","CLIENT_SECRET","API","getUserById","s","$","ajax","type","url","app","userid","success","beforeSend","xhr","settings","setRequestHeader","user","attributes","access_token","data","api_key","error","dataType","Views","RDARouter","Backbone","Router","extend","initialize","User","Model","localStorage","LocalStorage","STORAGE_ID","defaults","id","fetch","routes","refresh","hello","users/:userid","users","password/:userid","password","*actions","_","prototype","on","renderUsersView","navigate","trigger","renderSettingsView","renderUserSettingsView","renderChangePasswordView","actions","renderEmptyView","renderHelloView","renderLoginView"],"mappings":"AAAA,GAAAA,KAAAC,KAAAD,OAEAA,KAAAE,QACAC,QAAA,wBACAC,QAAA,iCACAC,UAAA,mBACAC,cAAA,uBCNA,IAAAN,KAAAC,KAAAD,OAOAA,KAAAO,KAWAC,YAAA,SAAAC,GACAC,EAAAC,MACAC,KAAA,OACAC,IAAAC,IAAAZ,OAAAC,QAAA,4BAAAM,EAAAM,OACAC,QAAAP,EAAAO,QACAC,WAAA,SAAAC,EAAAC,GACAD,EAAAE,iBAAA,gBAAA,UAAAN,IAAAO,KAAAC,WAAAC,eAEAC,MACAC,QAAAX,IAAAZ,OAAAE,SAEAsB,MAAAjB,EAAAiB,MACAC,SAAA,UC9BA,IAAA3B,KAAAC,KAAAD,OACAA,KAAA4B,MAAA5B,IAAA4B,SAEA,IAAAC,WAAAC,SAAAC,OAAAC,QACAC,WAAA,WACA,GAAAC,GAAAJ,SAAAK,MAAAH,QACAI,aAAA,GAAAN,UAAAO,aAAArC,IAAAE,OAAAoC,YACAC,SAAA,WACA,OACAC,GAAA,EACAjB,aAAA,KACAC,WAIAvB,MAAAoB,KAAA,GAAAa,GACAjC,KAAAoB,KAAAoB,SAEAC,QACAC,QAAA,UACAC,MAAA,QACAzB,SAAA,WACA0B,gBAAA,eACAC,MAAA,QACAC,mBAAA,WACAC,SAAA,WACAC,WAAA,iBAIAC,GAAAX,SAAAV,UAAAsB,WACAjD,OAAAF,IAAAE,OACAK,IAAAP,IAAAO,IACAqB,MAAA5B,IAAA4B,OAGA,IAAAd,KAAA,GAAAe,UAEAf,KAAAsC,GAAA,cAAA,SAAAZ,GACAvC,KAAAoB,KAAAC,WAAAC,aAGAT,IAAAc,MAAAyB,kBAFApD,KAAAqD,SAAA,KAAAC,SAAA,MAMAzC,IAAAsC,GAAA,iBAAA,WACAnD,KAAAoB,KAAAC,WAAAC,aAGAT,IAAAc,MAAA4B,qBAFAvD,KAAAqD,SAAA,KAAAC,SAAA,MAMAzC,IAAAsC,GAAA,qBAAA,SAAArC,GACAd,KAAAoB,KAAAC,WAAAC,aAGAT,IAAAc,MAAA6B,uBAAA1C,GAFAd,KAAAqD,SAAA,KAAAC,SAAA,MAMAzC,IAAAsC,GAAA,iBAAA,SAAArC,GACAd,KAAAoB,KAAAC,WAAAC,aAGAT,IAAAc,MAAA8B,yBAAA3C,GAFAd,KAAAqD,SAAA,KAAAC,SAAA,MAMAzC,IAAAsC,GAAA,gBAAA,SAAAO,GACA1D,KAAAoB,KAAAC,WAAAC,aAGAT,IAAAc,MAAAgC,kBAFA3D,KAAAqD,SAAA,KAAAC,SAAA,MAMAzC,IAAAsC,GAAA,cAAA,SAAAO,GACA1D,KAAAoB,KAAAC,WAAAC,aAGAT,IAAAc,MAAAiC,kBAFA5D,KAAAqD,SAAA,KAAAC,SAAA,MAMAzC,IAAAsC,GAAA,qBAAA,SAAAO,GACA1D,KAAAoB,KAAAC,WAAAC,aACAtB,KAAAqD,SAAA,KAAAC,SAAA,IAEAzC,IAAAc,MAAAkC","file":"app.js","sourcesContent":["var RDA = this.RDA || {};\n\nRDA.Config = {\n\tAPI_URI : \"http://localhost:5000\",\n\tAPI_KEY : \"U3DVW32BC431Y9IOIVXCSY212UIJH8\",\n\tCLIENT_ID : \"<YOUR_CLIENT_ID>\",\n\tCLIENT_SECRET : \"<YOUR_CLIENT_SECRET>\"\n};\n","var RDA = this.RDA || {};\n\n//\n// API Calls used by the app.\n// Functions may use external attributes from {app}. Don't reuse them without\n// making sure you reuse {app} as well.\n//\nRDA.API = {\n\n    //\n    // POST /api/v1/user/get_profile/<userid>\n    // Parameters:\n    //   * s.userid -> <userid>\n    //   * s.success: $.ajax's success callback\n    //   * s.error: $.ajax's error callback\n    //\n    // !!! Uses external attributes from {app.Config} and {app.user}\n    //\n    getUserById : function(s) {\n        $.ajax({\n            type: 'POST',\n            url: app.Config.API_URI + \"/api/v1/user/get_profile/\" + s.userid,\n            success: s.success,\n            beforeSend: function(xhr, settings) {\n                xhr.setRequestHeader('Authorization', 'Bearer ' + app.user.attributes.access_token);\n            },\n            data: {\n                \"api_key\" : app.Config.API_KEY,\n            },\n            error: s.error,\n            dataType: 'json'\n        });\n    }\n\n};\n","var RDA = this.RDA || {};\nRDA.Views = RDA.Views || {};\n\nvar RDARouter = Backbone.Router.extend({\n\tinitialize: function() {\n\t\tvar User = Backbone.Model.extend({\n\t\t\tlocalStorage: new Backbone.LocalStorage(RDA.Config.STORAGE_ID),\n\t\t\tdefaults: function() {\n\t\t\t\treturn {\n\t\t\t\t\tid: 1,\n\t\t\t\t\taccess_token: null,\n\t\t\t\t\tdata: {}\n\t\t\t\t};\n\t\t    }\n\t\t});\n\t\tthis.user = new User();\n\t\tthis.user.fetch();\n\t},\n    routes: {\n\t\t\"refresh\" : \"refresh\",\n\t\t\"hello\" : \"hello\",\n\t\t\"settings\" : \"settings\",\n\t\t\"users/:userid\" : \"usersettings\",\n\t\t\"users\" : \"users\",\n\t\t\"password/:userid\" : \"password\",\n\t\t\"password\" : \"password\",\n\t\t\"*actions\" : \"defaultRoute\"\n\t}\n});\n\n_.defaults(RDARouter.prototype, {\n\tConfig: RDA.Config,\n\tAPI: RDA.API,\n\tViews: RDA.Views\n});\n\nvar app = new RDARouter();\n\napp.on('route:users', function (id) {\n\tif (!this.user.attributes.access_token) {\n\t\tthis.navigate(\"/\", {trigger: true});\n\t} else {\n\t\tapp.Views.renderUsersView();\n\t}\n});\n\napp.on('route:settings', function () {\n\tif (!this.user.attributes.access_token) {\n\t\tthis.navigate(\"/\", {trigger: true});\n\t} else {\n\t\tapp.Views.renderSettingsView();\n\t}\n});\n\napp.on('route:usersettings', function (userid) {\n\tif (!this.user.attributes.access_token) {\n\t\tthis.navigate(\"/\", {trigger: true});\n\t} else {\n\t\tapp.Views.renderUserSettingsView(userid);\n\t}\n});\n\napp.on('route:password', function (userid) {\n\tif (!this.user.attributes.access_token) {\n\t\tthis.navigate(\"/\", {trigger: true});\n\t} else {\n\t\tapp.Views.renderChangePasswordView(userid);\n\t}\n});\n\napp.on('route:refresh', function(actions) {\n\tif (!this.user.attributes.access_token) {\n\t\tthis.navigate(\"/\", {trigger: true});\n\t} else {\n\t\tapp.Views.renderEmptyView();\n\t}\n});\n\napp.on('route:hello', function(actions) {\n\tif (!this.user.attributes.access_token) {\n\t\tthis.navigate(\"/\", {trigger: true});\n\t} else {\n\t\tapp.Views.renderHelloView();\n\t}\n});\n\napp.on('route:defaultRoute', function(actions) {\n\tif (this.user.attributes.access_token) {\n\t\tthis.navigate(\"/\", {trigger: true});\n\t} else {\n\t\tapp.Views.renderLoginView();\n\t}\n});\n"],"sourceRoot":"/source/"}